#!/usr/bin/env bash
set -e

BASEDIR="$(readlink -f "$(dirname "${BASH_SOURCE[0]}")")"
cd "${BASEDIR}"

echo 'Commit current changes...'
git add -A
git commit

echo 'Pull changes from upstream...'
git pull

echo 'Update submodules...'
git submodule update --remote

echo 'Commit submodule changes...'
git add -A
git commit -m "Updated remotes @ $(date -u -Is)"

echo 'Push to upstream...'
git push